{% extends "base.html" %}

{% block title %} Invitations {% endblock %}

{% block page_title %}
Invitations
{% endblock %}

{% block content %}

<div class="receivers_invitations">
<h4>Received</h4>
{% for invitation in invitations %}
    <div class="invitation_need_response">Please respond to {{ invitation.sender.name }}'s invitation (id {{ invitation.invitation_id }}): 
        <div>Name: {{ invitation.business_name }}</div> 
        <div>Address: {{ invitation.business_address }}</div>
        <form action="/invitations"  data-id="{{ invitation.invitation_id }}" class="respond_to_invitation" method="POST">
            <input type="radio" name="selection" value="accept" id="accept_radio_button" {% if invitation.status_id == 1 %}checked="checked"{% endif %}> Accept </input>
            <input type="radio" name="selection" value="decline" id="decline_radio_button"{% if invitation.status_id == 2 %}checked="checked"{% endif %}> Decline </input>
            <input type="hidden" name="invitation_id" value={{ invitation.invitation_id }}> </input>
            <button class="btn btn-default invitation_response" type="submit" name="invitation_response" value="Submit">Submit</button><span class="invite_success"></span>
            <hr>
        </form>
    </div>
{% endfor %}
</div>


<div class="sent_invitations">
<h4>Sent</h4>
{% for invite_details in sent_invitations %}
    {% if invite_details.status is none %}
        <div class="list_of_invitations">
            <span>Your invite to </span><span>{{ invite_details.receiver.name }} is still </span><span class="pending_status">pending.</span>
            <div class="invite_details">{{ business_address }} {{ business_name }}</div>
        </div>
        <hr>
    {% else %}
        <div>
          <span>{{ invite_details.receiver.name }} has 
            {% if invite_details.status.status_type == "accept" %}
              <span class="acccept_invitation">{{ invite_details.status.status_type }}ed</span> 
            {% else %}
              <span class="decline_invitation">{{ invite_details.status.status_type }}ed</span> 
            {% endif %}
          your invitation.
          </span>
          <div class="invite_details">{{ business_address }} {{ business_name }}</div>
          <hr>
        </div>
    {% endif %}
{% endfor %}
</div>

{% endblock content %}